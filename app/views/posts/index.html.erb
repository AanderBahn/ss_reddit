
<p id="notice"><%= notice %></p>
<div class="container">
  <div class="row">
    <div class="page-header">
      <h1>Posts <small><%= link_to 'Add New Post', new_post_path %></small></h1>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <%= render 'form', { :@post => Post.new } %>
    </div>
  </div>


  <div class="row">
    <div class="col-md-12">
      <table class="table">
        <thead>
          <tr>
            <th>Title</th>
            <th>User</th>
            <th>Votes</th>
            <th>Comments</th>
            <th colspan="2"></th>
          </tr>
        </thead>

        <tbody>
          <% @posts.each do |post| %>
          <tr>
            <td><%= link_to post.title, post_url(post.id) %></td>
            <td><%= post.user.email %></td>
            <td><%= post.votes.count %></td>
            <td><%= post.comments.count %></td>

            <% if current_user == post.user %>
            <td><%= link_to 'Edit', edit_post_path(post) %></td>
            <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %>

          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
